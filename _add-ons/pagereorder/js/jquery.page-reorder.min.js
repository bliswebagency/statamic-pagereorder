(function(e){var t,r=e();e.fn.sortable=function(n){var i=n+"";return n=e.extend({connectWith:!1},n),this.each(function(){if(/^enable|disable|destroy$/.test(i)){var a=e(this).children(e(this).data("items")).attr("draggable","enable"==i);return"destroy"==i&&a.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s"),void 0}var d,s,a=e(this).children(n.items),o=e("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder">');a.find(n.handle).mousedown(function(){d=!0}).mouseup(function(){d=!1}),e(this).data("items",n.items),r=r.add(o),n.connectWith&&e(n.connectWith).add(this).data("connectWith",n.connectWith),a.attr("draggable","true").on("dragstart.h5s",function(r){if(n.handle&&!d)return!1;d=!1;var i=r.originalEvent.dataTransfer;i.effectAllowed="move",i.setData("Text","dummy"),s=(t=e(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){t&&(t.removeClass("sortable-dragging").show(),r.detach(),s!=t.index()&&t.parent().trigger("sortupdate",{item:t}),t=null)}).not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,o]).on("dragover.h5s dragenter.h5s drop.h5s",function(i){return a.is(t)||n.connectWith===e(t).parent().data("connectWith")?"drop"==i.type?(i.stopPropagation(),r.filter(":visible").after(t),t.trigger("dragend.h5s"),!1):(i.preventDefault(),i.originalEvent.dataTransfer.dropEffect="move",a.is(this)?(n.forcePlaceholderSize&&o.height(t.outerHeight()),t.hide(),e(this)[o.index()<e(this).index()?"after":"before"](o),r.not(o).detach()):r.is(this)||e(this).children(n.items).length||(r.detach(),e(this).append(o)),!1):!0})})}})(jQuery),function(){$(function(){var e,t,r,n,i,a,d,s,o;return(a="draggable"in document.createElement("span"))?(r=$("#page-tree"),t=r.find(".subpages"),o="page-order",n=""+o+"-active",s=""+o+"-ignore",i=""+o+"-sortable",d='<div class="'+o+'">\n  <div class="'+o+'__block">\n    <div class="'+o+'__icon">&#11021;</div>\n  </div>\n</div>',r.children().each(function(){var e,t,r;return e=$(this),t=$.trim(e.find(".slug-preview").first().text()),"/"===t?e.addClass(s):(e.addClass(i),null!=(r=e.find("> .page-wrapper"))?r.prepend(d):void 0)}),e=$("#page-tree").sortable({items:"."+i,handle:"."+o+"__block"}),e.on({dragstart:function(){return r.addClass(n),t.slideUp()},dragend:function(){return r.removeClass(n),t.slideDown()},sortupdate:function(){var e,t,r,n,i,a,d;return a=$(this).find("> .page"),r=function(){var t,r,n;for(n=[],t=0,r=a.length;r>t;t++)i=a[t],e=$(i),n.push({index:e.index(),url:$.trim(e.find(".slug-preview").first().text())});return n}(),n=JSON.stringify(r),t=window.location,d=""+t.protocol+"//"+t.host,window.location=""+d+"/TRIGGER/pagereorder/reorder_folders?order="+n,void 0}})):!1})}.call(this);